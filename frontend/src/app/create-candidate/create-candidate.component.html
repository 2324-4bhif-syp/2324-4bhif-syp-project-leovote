<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<h2>{{ 'candidates' | translate }}</h2>
<div style="color: red; text-align: center" *ngIf="errorMessage">
  {{ errorMessage }}
</div>


<mat-grid-list cols="2" rowHeight="25em">
  <mat-grid-tile
    [colspan]="1"
    [rowspan]="2">

    <div class="table-container" id="create-candidate-table">
      <table class="table-template">
        <thead>
        <tr>
          <th>{{ 'school_id' | translate }}</th>
          <th>{{ 'name' | translate }}</th>
          <th>{{ 'class' | translate }}</th>
          <th>{{'remove' | translate}}</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let candidate of tablePaginationService.getCurrentPageData(); let i = index">
          <td>{{ candidate.id }}</td>
          <td>{{ candidate.firstName }} {{ candidate.lastName }}</td>
          <td>{{ candidate.grade }}</td>
          <td>
            <button mat-icon-button style="background-color: rgba(255,0,0,0)" (click)="confirmDelete(candidate)" class="btn">
              <mat-icon style="font-weight: 700">remove</mat-icon>
            </button>
          </td>
        </tr>
        </tbody>
      </table>

      <div class="pagination-divider"></div> <!-- Divider line above pagination -->
      <div class="pagination">
        <button (click)="tablePaginationService.goToFirstPage()">
          <mat-icon>skip_previous</mat-icon> <!-- Skip to first -->
        </button>
        <button (click)="tablePaginationService.goToPreviousPage()">
          <mat-icon>navigate_before</mat-icon> <!-- Previous -->
        </button>
        <span class="page-info">{{ tablePaginationService.currentPage }}
          / {{ tablePaginationService.getPageCount() }}</span>
        <button (click)="tablePaginationService.goToNextPage()">
          <mat-icon>navigate_next</mat-icon> <!-- Next -->
        </button>
        <button (click)="tablePaginationService.goToLastPage()">
          <mat-icon>skip_next</mat-icon> <!-- Skip to end -->
        </button>
      </div>
    </div>
  </mat-grid-tile>

  <mat-grid-tile
    [colspan]="1"
    [rowspan]="1">
    <div class="upload-container">
      <p>{{ 'csv_upload' | translate }}:</p>
      <div class="centered-elements">
        <img src="./assets/img-frontend/upload.png" height=20% width=20%>
        <input type="file" (change)="onFileChange($event)">
        <button [disabled]="!isCsvUploaded" (click)="parseCSV()">{{ 'upload_button' | translate }}</button>
      </div>
    </div>
  </mat-grid-tile>

  <mat-grid-tile
    [colspan]="1"
    [rowspan]="1">
    <div class="candidate-creation-container">
      <input class="input-template" [(ngModel)]="this.candidate.schoolId" placeholder="{{ 'school_id' | translate }}"/>
      <br>
      <input class="input-template" [(ngModel)]="this.candidate.firstName"
             placeholder="{{ 'first_name' | translate }}"/>
      <br>
      <input class="input-template" [(ngModel)]="this.candidate.lastName" placeholder="{{ 'last_name' | translate }}"/>
      <br>
      <input class="input-template" [(ngModel)]="this.candidate.grade" placeholder="{{ 'class' | translate }}"/>
      <p>{{ 'image' | translate }}:</p>
      <input type="file" id="imageInput" (change)="onImageChange($event)">
      <div class="input">
        <button (click)="createCandidate()">{{ 'create_candidate_button' | translate }}</button>
      </div>
    </div>
  </mat-grid-tile>
</mat-grid-list>


<div id="container-floating">
  <div [routerLink]="['/admin', 'overview' ,'candidate-overview']" id="floating-button">
    <img class="reminder" src="./assets/img-frontend/back.png" height="25px" width="25px"
         alt="{{ 'picture_of_candidate' | translate }}"/>
  </div>
</div>
