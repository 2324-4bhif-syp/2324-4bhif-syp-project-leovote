<div class="headliner-container">
  <h2>{{ election?.name }}</h2>
  <p>Logged in as: {{ keycloakService.getUsername() }}</p>
</div>
<div class="container">
  <div class="movies-container">
    <h3>Candidate</h3>
    <div
      cdkDropList
      [cdkDropListData]="election?.participatingCandidates"
      class="candidates-list"
      (cdkDropListDropped)="drop($event)"
      [cdkDropListConnectedTo]="allDropLists"
      id="candidates-list"
    >
      <div *ngFor="let candidate of election?.participatingCandidates" class="movie-item" cdkDrag>
        {{ candidate.lastName }} {{ candidate.firstName }}
      </div>
    </div>
  </div>

  <!-- Right side: rating boxes -->
  <div class="rating-container">
    <h3>Punkte</h3>
    <div *ngFor="let point of points; let i = index" class="rating-box">
      <h4>{{ point }} Punkte</h4>
      <div
        cdkDropList
        [cdkDropListData]="ratedCandidates[i]"
        class="example-list"
        (cdkDropListDropped)="dropToRating($event, i)"
        [cdkDropListConnectedTo]="allDropLists"
        [id]="'rating-list-' + i"
      >
        <div *ngFor="let candidate of ratedCandidates[i]" class="movie-item" cdkDrag>
          {{ candidate.firstName }} {{ candidate.lastName }}
        </div>
      </div>
    </div>
  </div>

  <!-- Submit Button -->
  <div class="submit-container">
    <button mat-raised-button color="primary" (click)="openConfirmationDialog()">Abstimmen</button>
  </div>
</div>

<ng-template #confirmationDialog>
  <h3>Bestätigung</h3>
  <p>Bist du sicher, dass du deine Abstimmung absenden möchtest?</p>
  <button mat-button (click)="confirmVote()">Ja</button>
  <button mat-button (click)="cancelVote()">Nein</button>
</ng-template>
